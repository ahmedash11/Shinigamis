!function(b){b.fn.disableSelection_dropotron=function(){return b(this).css("user-select","none").css("-khtml-user-select","none").css("-moz-user-select","none").css("-o-user-select","none").css("-webkit-user-select","none")},b.fn.dropotron=function(j){if(0==this.length)return b(this);if(1<this.length)for(var k=0;k<this.length;k++)b(this[k]).dropotron(j);return b.dropotron(b.extend({selectorParent:b(this)},j))},b.dropotron=function(j){var k=b.extend({selectorParent:null,baseZIndex:1e3,menuClass:"dropotron",expandMode:"hover",hoverDelay:150,hideDelay:250,openerClass:"opener",openerActiveClass:"active",submenuClassPrefix:"level-",mode:"fade",speed:"fast",easing:"swing",alignment:"left",offsetX:0,offsetY:0,globalOffsetY:0,IEOffsetX:0,IEOffsetY:0,noOpenerFade:!0,detach:!0,cloneOnDetach:!0},j),m=k.selectorParent,q=m.find("ul"),w=b("body"),x=b("body,html"),y=b(window),z=!1,A=null,B=null;m.on("doCollapseAll",function(){q.trigger("doCollapse")}),q.each(function(){var D=b(this),E=D.parent();0<k.hideDelay&&D.add(E).on("mouseleave",function(){window.clearTimeout(B),B=window.setTimeout(function(){D.trigger("doCollapse")},k.hideDelay)}),D.disableSelection_dropotron().hide().addClass(k.menuClass).css("position","absolute").on("mouseenter",function(){window.clearTimeout(B)}).on("doExpand",function(){if(D.is(":visible"))return!1;window.clearTimeout(B),q.each(function(){var P=b(this);b.contains(P.get(0),E.get(0))||P.trigger("doCollapse")});var F,G,H,I,J=E.offset(),K=E.position(),L=(E.parent().position(),E.outerWidth()),M=D.outerWidth(),N=D.css("z-index")==k.baseZIndex;if(N){switch(F=k.detach?J:K,I=F.top+E.outerHeight()+k.globalOffsetY,G=k.alignment,D.removeClass("left").removeClass("right").removeClass("center"),k.alignment){case"right":H=F.left-M+L,0>H&&(H=F.left,G="left");break;case"center":H=F.left-Math.floor((M-L)/2),0>H?(H=F.left,G="left"):H+M>y.width()&&(H=F.left-M+L,G="right");break;case"left":default:H=F.left,H+M>y.width()&&(H=F.left-M+L,G="right");}D.addClass(G)}else switch("relative"==E.css("position")||"absolute"==E.css("position")?(I=k.offsetY,H=-1*K.left):(I=K.top+k.offsetY,H=0),k.alignment){case"right":H+=-1*E.parent().outerWidth()+k.offsetX;break;case"center":case"left":default:H+=E.parent().outerWidth()+k.offsetX;}navigator.userAgent.match(/MSIE ([0-9]+)\./)&&8>RegExp.$1&&(H+=k.IEOffsetX,I+=k.IEOffsetY),D.css("left",H+"px").css("top",I+"px").css("opacity","0.01").show();var O=!1;switch(H="relative"==E.css("position")||"absolute"==E.css("position")?-1*K.left:0,0>D.offset().left?(H+=E.parent().outerWidth()-k.offsetX,O=!0):D.offset().left+M>y.width()&&(H+=-1*E.parent().outerWidth()-k.offsetX,O=!0),O&&D.css("left",H+"px"),D.hide().css("opacity","1"),k.mode){case"zoom":z=!0,E.addClass(k.openerActiveClass),D.animate({width:"toggle",height:"toggle"},k.speed,k.easing,function(){z=!1});break;case"slide":z=!0,E.addClass(k.openerActiveClass),D.animate({height:"toggle"},k.speed,k.easing,function(){z=!1});break;case"fade":if(z=!0,N&&!k.noOpenerFade){var O;O="slow"==k.speed?80:"fast"==k.speed?40:Math.floor(k.speed/2),E.fadeTo(O,.01,function(){E.addClass(k.openerActiveClass),E.fadeTo(k.speed,1),D.fadeIn(k.speed,function(){z=!1})})}else E.addClass(k.openerActiveClass),E.fadeTo(k.speed,1),D.fadeIn(k.speed,function(){z=!1});break;case"instant":default:E.addClass(k.openerActiveClass),D.show();}return!1}).on("doCollapse",function(){return!!D.is(":visible")&&(D.hide(),E.removeClass(k.openerActiveClass),D.find("."+k.openerActiveClass).removeClass(k.openerActiveClass),D.find("ul").hide(),!1)}).on("doToggle",function(){return D.is(":visible")?D.trigger("doCollapse"):D.trigger("doExpand"),!1}),E.disableSelection_dropotron().addClass("opener").css("cursor","pointer").on("click touchend",function(F){z||(F.preventDefault(),F.stopPropagation(),D.trigger("doToggle"))}),"hover"==k.expandMode&&E.hover(function(){z||(A=window.setTimeout(function(){D.trigger("doExpand")},k.hoverDelay))},function(){window.clearTimeout(A)})}),q.find("a").css("display","block").on("click touchend",function(D){z||1>b(this).attr("href").length&&D.preventDefault()}),m.find("li").css("white-space","nowrap").each(function(){var D=b(this),E=D.children("a"),F=D.children("ul"),G=E.attr("href");E.on("click touchend",function(H){0==G.length||"#"==G?H.preventDefault():H.stopPropagation()}),0<E.length&&0==F.length&&D.on("click touchend",function(H){z||(m.trigger("doCollapseAll"),H.stopPropagation())})}),m.children("li").each(function(){var D,E=b(this),F=E.children("ul");if(0<F.length){k.detach&&(k.cloneOnDetach&&(D=F.clone(),D.attr("class","").hide().appendTo(F.parent())),F.detach().appendTo(w));for(var G=k.baseZIndex,H=1,I=F;0<I.length;H++)I.css("z-index",G++),k.submenuClassPrefix&&I.addClass(k.submenuClassPrefix+(G-1-k.baseZIndex)),I=I.find("> li > ul")}}),y.on("scroll",function(){m.trigger("doCollapseAll")}).on("keypress",function(D){z||27!=D.keyCode||(D.preventDefault(),m.trigger("doCollapseAll"))}),x.on("click touchend",function(){z||m.trigger("doCollapseAll")})}}(jQuery);
